From 3cad6d53a1861e32b9126615f58aba3885194090 Mon Sep 17 00:00:00 2001
Message-ID: <3cad6d53a1861e32b9126615f58aba3885194090.1722253377.git.maciej.borzecki@canonical.com>
From: Maciej Borzecki <maciej.borzecki@canonical.com>
Date: Mon, 29 Jul 2024 13:42:25 +0200
Subject: [PATCH] packaging: fix invocation of the built snap binary

Make sure to invoke snap from the build directory.

Signed-off-by: Maciej Borzecki <maciej.borzecki@canonical.com>
---
 packaging/snapd.mk | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/packaging/snapd.mk b/packaging/snapd.mk
index c6e99bde7a6f8fc33748e24bc85cb6bbfbc76f4e..4647e7d370242e0fa98162e7941aa01620379998 100644
--- a/packaging/snapd.mk
+++ b/packaging/snapd.mk
@@ -116,8 +116,8 @@ install:: | $(DESTDIR)$(bindir)
 	ln -s $(libexecdir)/snapd/snapctl $|/snapctl
 
 # Generate and install man page for snap command
-install:: snap | $(DESTDIR)$(mandir)/man8
-	./snap help --man > $|/snap.8
+install:: $(builddir)/snap | $(DESTDIR)$(mandir)/man8
+	$(builddir)/snap help --man > $|/snap.8
 
 # Install the directory structure in /var/lib/snapd
 install::
-- 
2.45.2

